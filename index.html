<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
    <title>KwikTask</title>
    
    <!-- Google AdSense - your existing client ID -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9621027812053080" crossorigin="anonymous"></script>
    
    <!-- Stripe.js for subscriptions -->
    <script src="https://js.stripe.com/v3/"></script>
    
    <!-- Fonts & Icons - modern, minimal -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <!-- Chart.js for analytics -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
    
    <!-- CSS -->
    <link rel="stylesheet" href="styles.css">

    <!-- AUTH -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
        import { getAuth } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";
        import { getFirestore } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

        const firebaseConfig = {
        apiKey: "AIzaSyBxp7N-ozFLbK-o2GX13vBjby6a9CfaAww",
        authDomain: "kwiktask-a454c.firebaseapp.com",
        projectId: "kwiktask-a454c",
        storageBucket: "kwiktask-a454c.firebasestorage.app",
        messagingSenderId: "527340121540",
        appId: "1:527340121540:web:c74f0773f60b5e1fc98891",
        measurementId: "G-V6DMGJ1Y3B"
        };

        const app = initializeApp(firebaseConfig);
        window.auth = getAuth(app);
        window.db = getFirestore(app);
    </script>
</head>
<body>
    <div class="app-container">
        <!-- Header with pro status -->
        <div class="header">
            <span class="logo-text">kwiktask</span>
            <div class="header-right">
                <div class="pro-badge" id="proBadge" style="display: none;">
                    <i class="fas fa-crown"></i>
                    <span>pro</span>
                </div>
                <button class="logout-btn" id="logoutBtn">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>logout</span>
                </button>
            </div>
        </div>

        <!-- ===== NAVBAR ===== -->
        <div class="navbar">
            <button class="nav-item active" data-view="tasks">
                <i class="fas fa-check-circle"></i>
                <span>tasks</span>
            </button>
            <button class="nav-item" data-view="analytics">
                <i class="fas fa-chart-line"></i>
                <span>analytics</span>
                <span class="pro-tag" id="analyticsProTag">pro</span>
            </button>
            <button class="nav-item" data-view="calendar">
                <i class="fas fa-calendar"></i>
                <span>calendar</span>
                <span class="pro-tag" id="calendarProTag">pro</span>
            </button>
            <button class="nav-item" data-view="settings">
                <i class="fas fa-sliders-h"></i>
                <span>settings</span>
            </button>
        </div>

        <!-- Main content -->
        <div class="main-content">
            <!-- ===== TASKS VIEW (default) ===== -->
            <div id="tasks-view">
                <!-- Hero section with pro CTA for free users -->
                <div class="hero">
                    <h1>clear your mind,<br>one task at a time</h1>
                    <p class="subtitle">the minimalist task manager for focused people</p>
                    <div class="free-tier-indicator" id="freeTierIndicator">
                        <span class="free-badge">free plan</span>
                        <span class="task-limit-indicator" id="taskLimitIndicator">0/5 tasks</span>
                    </div>
                </div>

                <!-- Task input - clean and focused -->
                <div class="task-input-container">
                    <form id="todo-form">
                        <input id="todo-input" type="text" placeholder="write a task..." autocomplete="off">
                        <button id="add-button" type="submit">
                            <i class="fas fa-plus"></i>
                        </button>
                    </form>
                </div>

                <!-- Task list -->
                <div class="task-section">
                    <div class="section-label">
                        <span>today's tasks</span>
                        <span class="task-count" id="taskCount">0 tasks</span>
                    </div>
                    <ul id="todo-list" class="todo-list">
                        <!-- tasks injected via JS -->
                    </ul>
                    
                    <!-- Upgrade prompt for free users when approaching limit -->
                    <div class="upgrade-prompt" id="upgradePrompt" style="display: none;">
                        <div class="upgrade-content">
                            <i class="fas fa-lock"></i>
                            <span>you've reached the free limit</span>
                        </div>
                        <button class="upgrade-prompt-btn" id="upgradePromptBtn">upgrade to pro â†’</button>
                    </div>
                </div>

                <!-- AdSense native ad unit - only for free users -->
                <div class="ad-unit" id="adUnit">
                    <ins class="adsbygoogle"
                         style="display:block"
                         data-ad-client="ca-pub-9621027812053080"
                         data-ad-slot="1234567890"
                         data-ad-format="horizontal"
                         data-full-width-responsive="true"></ins>
                </div>
            </div>

            <!-- ===== ANALYTICS VIEW (pro only) ===== -->
            <div id="analytics-view" style="display: none;">
                <div class="hero">
                    <h1>analytics</h1>
                    <p class="subtitle">track your productivity over time</p>
                </div>
                
                <!-- Locked state for free users -->
                <div class="pro-locked-feature" id="analyticsLocked">
                    <div class="locked-content">
                        <i class="fas fa-lock"></i>
                        <h3>analytics are a pro feature</h3>
                        <p>upgrade to see charts, trends, and insights about your productivity</p>
                        <button class="upgrade-prompt-btn" id="analyticsUpgradeBtn">upgrade to pro â†’</button>
                    </div>
                </div>

                <!-- Analytics content for pro users -->
                <div class="analytics-content" id="analyticsContent" style="display: none;">
                    <!-- Stats Grid -->
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-tasks"></i>
                            </div>
                            <div class="stat-details">
                                <span class="stat-label">total tasks</span>
                                <span class="stat-value" id="totalTasksStat">0</span>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-check-circle"></i>
                            </div>
                            <div class="stat-details">
                                <span class="stat-label">completed</span>
                                <span class="stat-value" id="completedTasksStat">0</span>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-chart-pie"></i>
                            </div>
                            <div class="stat-details">
                                <span class="stat-label">completion rate</span>
                                <span class="stat-value" id="completionRateStat">0%</span>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-calendar-week"></i>
                            </div>
                            <div class="stat-details">
                                <span class="stat-label">avg per day</span>
                                <span class="stat-value" id="avgTasksStat">0</span>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-fire"></i>
                            </div>
                            <div class="stat-details">
                                <span class="stat-label">current streak</span>
                                <span class="stat-value" id="currentStreakStat">0</span>
                                <span class="stat-unit">days</span>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-trophy"></i>
                            </div>
                            <div class="stat-details">
                                <span class="stat-label">longest streak</span>
                                <span class="stat-value" id="longestStreakStat">0</span>
                                <span class="stat-unit">days</span>
                            </div>
                        </div>
                    </div>

                    <!-- Charts Section -->
                    <div class="charts-section">
                        <div class="chart-card">
                            <div class="chart-header">
                                <h3>weekly activity</h3>
                                <span class="chart-period">last 7 days</span>
                            </div>
                            <div class="chart-container">
                                <canvas id="weeklyChart"></canvas>
                            </div>
                        </div>
                        
                        <div class="chart-card">
                            <div class="chart-header">
                                <h3>productivity by time</h3>
                                <span class="chart-period">when you're most productive</span>
                            </div>
                            <div class="chart-container doughnut">
                                <canvas id="timeOfDayChart"></canvas>
                            </div>
                        </div>
                    </div>

                    <!-- Insights Section -->
                    <div class="insights-section">
                        <div class="insights-header">
                            <h3><i class="fas fa-lightbulb"></i> insights & recommendations</h3>
                        </div>
                        <ul class="insights-list" id="productivityInsights">
                            <!-- Insights will be dynamically added here -->
                        </ul>
                    </div>

                    <!-- Export Section -->
                    <div class="export-section">
                        <div class="export-card">
                            <div class="export-icon">
                                <i class="fas fa-file-export"></i>
                            </div>
                            <div class="export-content">
                                <h4>export your data</h4>
                                <p>download your task history as a CSV file</p>
                            </div>
                            <button class="export-btn" id="exportDataBtn">
                                <i class="fas fa-download"></i> export
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ===== CALENDAR VIEW (pro only) ===== -->
            <div id="calendar-view" style="display: none;">
                <div class="hero">
                    <h1>calendar</h1>
                    <p class="subtitle">plan and visualize your tasks</p>
                </div>
                
                <!-- Locked state for free users -->
                <div class="pro-locked-feature" id="calendarLocked">
                    <div class="locked-content">
                        <i class="fas fa-lock"></i>
                        <h3>calendar is a pro feature</h3>
                        <p>upgrade to schedule tasks and see your monthly overview</p>
                        <button class="upgrade-prompt-btn" id="calendarUpgradeBtn">upgrade to pro â†’</button>
                    </div>
                </div>

                <!-- Calendar content for pro users -->
                <div class="calendar-content" id="calendarContent" style="display: none;">
                    <div class="calendar-header">
                        <h2 id="currentMonth">January 2026</h2>
                        <div class="calendar-nav">
                            <button class="calendar-nav-btn" id="todayBtn">today</button>
                            <button class="calendar-nav-btn" id="prevMonthBtn">
                                <i class="fas fa-chevron-left"></i>
                            </button>
                            <button class="calendar-nav-btn" id="nextMonthBtn">
                                <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Calendar Grid -->
                    <div class="calendar-grid" id="calendarGrid">
                        <!-- Calendar days will be dynamically generated here -->
                    </div>

                    <!-- Legend -->
                    <div class="calendar-legend">
                        <div class="legend-item">
                            <span class="legend-dot today"></span>
                            <span>today</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-dot has-tasks"></span>
                            <span>has tasks</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-dot completed"></span>
                            <span>completed tasks</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ===== SETTINGS VIEW ===== -->
            <div id="settings-view" style="display: none;">
                <div class="hero">
                    <h1>settings</h1>
                    <p class="subtitle">customize your experience</p>
                </div>
                
                <div class="settings-container">
                    <!-- Profile Settings -->
                    <div class="settings-card">
                        <h3><i class="fas fa-user-circle"></i> profile</h3>
                        <div class="settings-group">
                            <label>email</label>
                            <input type="email" class="profile-input" id="userEmail" readonly disabled>
                        </div>
                        <div class="settings-group">
                            <label>display name</label>
                            <input type="text" class="profile-input" id="displayName" placeholder="your name">
                        </div>
                        <button class="settings-save-btn" id="saveProfileBtn">
                            <i class="fas fa-save"></i> save profile
                        </button>
                    </div>

                    <!-- Appearance Settings -->
                    <div class="settings-card">
                        <h3><i class="fas fa-palette"></i> appearance</h3>
                        <div class="settings-group">
                            <label>theme</label>
                            <div class="theme-options">
                                <div class="theme-option">
                                    <input type="radio" name="theme" id="themeLight" value="light" checked>
                                    <label for="themeLight">
                                        <i class="fas fa-sun"></i>
                                        <span>light</span>
                                    </label>
                                </div>
                                <div class="theme-option">
                                    <input type="radio" name="theme" id="themeDark" value="dark">
                                    <label for="themeDark">
                                        <i class="fas fa-moon"></i>
                                        <span>dark</span>
                                    </label>
                                </div>
                                <div class="theme-option">
                                    <input type="radio" name="theme" id="themeSystem" value="system">
                                    <label for="themeSystem">
                                        <i class="fas fa-desktop"></i>
                                        <span>system</span>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Notifications Settings -->
                    <div class="settings-card">
                        <h3><i class="fas fa-bell"></i> notifications</h3>
                        <div class="setting-row">
                            <div class="setting-info">
                                <div class="setting-title">push notifications</div>
                                <div class="setting-description">get reminders for your tasks</div>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="notificationsEnabled">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        <div class="setting-row">
                            <div class="setting-info">
                                <div class="setting-title">sound effects</div>
                                <div class="setting-description">play sounds when completing tasks</div>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="soundEnabled" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        <div class="setting-row">
                            <div class="setting-info">
                                <div class="setting-title">email digest</div>
                                <div class="setting-description">weekly summary of your progress</div>
                                <span class="pro-badge-small">pro</span>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="emailDigest" disabled>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                    </div>

                    <!-- Task Preferences -->
                    <div class="settings-card">
                        <h3><i class="fas fa-tasks"></i> task preferences</h3>
                        <div class="settings-group">
                            <label>default sort order</label>
                            <select class="profile-input" id="taskSortOrder">
                                <option value="created">date created (newest)</option>
                                <option value="created_old">date created (oldest)</option>
                                <option value="alphabetical">alphabetical (A-Z)</option>
                                <option value="alphabetical_desc">alphabetical (Z-A)</option>
                            </select>
                        </div>
                        <div class="settings-group">
                            <label>week starts on</label>
                            <select class="profile-input" id="weekStartsOn">
                                <option value="monday">monday</option>
                                <option value="sunday">sunday</option>
                                <option value="saturday">saturday</option>
                            </select>
                        </div>
                    </div>

                    <!-- Data Management -->
                    <div class="settings-card">
                        <h3><i class="fas fa-database"></i> data management</h3>
                        <div class="setting-row">
                            <div class="setting-info">
                                <div class="setting-title">export data</div>
                                <div class="setting-description">download all your tasks as CSV</div>
                                <span class="pro-badge-small">pro</span>
                            </div>
                            <button class="settings-btn" id="exportDataBtn" disabled>
                                <i class="fas fa-download"></i> export
                            </button>
                        </div>
                        <div class="setting-row">
                            <div class="setting-info">
                                <div class="setting-title">import data</div>
                                <div class="setting-description">import tasks from CSV file</div>
                                <span class="pro-badge-small">pro</span>
                            </div>
                            <button class="settings-btn" id="importDataBtn" disabled>
                                <i class="fas fa-upload"></i> import
                            </button>
                        </div>
                    </div>

                    <!-- Danger Zone -->
                    <div class="settings-card danger-zone">
                        <h3><i class="fas fa-exclamation-triangle"></i> danger zone</h3>
                        <div class="setting-row">
                            <div class="setting-info">
                                <div class="setting-title">clear all tasks</div>
                                <div class="setting-description">permanently delete all your tasks</div>
                            </div>
                            <button class="danger-btn" id="clearDataBtn">
                                <i class="fas fa-trash-alt"></i> clear
                            </button>
                        </div>
                    </div>

                    <!-- Account Info -->
                    <div class="settings-card">
                        <h3><i class="fas fa-info-circle"></i> account</h3>
                        <div class="setting-row">
                            <div class="setting-info">
                                <div class="setting-title">plan</div>
                                <div class="setting-description">
                                    <span id="currentPlan">free</span> Â· 
                                    <button class="text-link" id="upgradeFromSettings">upgrade to pro</button>
                                </div>
                            </div>
                        </div>
                        <div class="setting-row">
                            <div class="setting-info">
                                <div class="setting-title">version</div>
                                <div class="setting-description">KwikTask v2.0 freemium</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Premium subscription card - show upgrade options -->
            <div class="premium-container" id="premiumContainer">
                <div class="monet-card premium" id="premiumCard">
                    <div class="card-icon">
                        <i class="fas fa-crown"></i>
                    </div>
                    <div class="card-content">
                        <h3>kwiktask pro</h3>
                        <p>unlimited tasks Â· analytics Â· no ads</p>
                        <div class="feature-comparison">
                            <div class="feature free">
                                <span>free</span>
                                <ul>
                                    <li><i class="fas fa-check"></i> 5 tasks max</li>
                                    <li><i class="fas fa-check"></i> basic checklists</li>
                                    <li><i class="fas fa-ban"></i> ads supported</li>
                                </ul>
                            </div>
                            <div class="feature pro">
                                <span>pro</span>
                                <ul>
                                    <li><i class="fas fa-check"></i> unlimited tasks</li>
                                    <li><i class="fas fa-check"></i> advanced analytics</li>
                                    <li><i class="fas fa-check"></i> calendar view</li>
                                    <li><i class="fas fa-check"></i> no ads</li>
                                    <li><i class="fas fa-check"></i> export data</li>
                                    <li><i class="fas fa-check"></i> priority support</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <button class="card-action premium-btn" id="subscribeBtn">
                        upgrade now â€¢ $4.99/mo
                    </button>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="footer">
            <span>Â© kwiktask 2026</span>
            <span class="dot">Â·</span>
            <span>v2.0 freemium</span>
        </div>
    </div>

    <!-- Stripe subscription modal -->
    <div class="modal" id="stripeModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>âœ¨ upgrade to kwiktask pro</h2>
                <button class="modal-close" id="closeModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="plan-details">
                    <div class="plan-price">
                        <span class="price">$4.99</span>
                        <span class="period">/month</span>
                    </div>
                    <ul class="plan-features">
                        <li><i class="fas fa-check"></i> unlimited tasks (free: 5 max)</li>
                        <li><i class="fas fa-check"></i> advanced analytics & insights</li>
                        <li><i class="fas fa-check"></i> calendar view</li>
                        <li><i class="fas fa-check"></i> export to CSV/PDF</li>
                        <li><i class="fas fa-check"></i> no advertisements</li>
                        <li><i class="fas fa-check"></i> priority email support</li>
                    </ul>
                </div>
                <button class="stripe-button" id="stripeCheckoutBtn">
                    <i class="fab fa-stripe"></i> subscribe now
                </button>
                <p class="secure-note">
                    <i class="fas fa-lock"></i> secure payment Â· cancel anytime
                </p>
                <p class="money-back">
                    14-day money-back guarantee
                </p>
            </div>
        </div>
    </div>

    <!-- Success modal (shown after upgrade) -->
    <div class="modal" id="successModal">
        <div class="modal-content success-content">
            <div class="modal-header">
                <h2>ðŸŽ‰ welcome to pro!</h2>
                <button class="modal-close" id="closeSuccessModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="success-icon">
                    <i class="fas fa-crown"></i>
                </div>
                <p class="success-message">you now have unlimited tasks, analytics, calendar, and zero ads.</p>
                <button class="success-btn" id="continueBtn">continue to tasks</button>
            </div>
        </div>
    </div>

    <!-- Day Tasks Modal (for calendar) -->
    <div class="modal" id="dayTasksModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="selectedDate">January 1, 2026</h2>
                <button class="modal-close" id="closeDayTasksModal">&times;</button>
            </div>
            <div class="modal-body">
                <ul class="day-tasks-list" id="dayTasksList">
                    <!-- Tasks for selected day will appear here -->
                </ul>
            </div>
        </div>
    </div>

    <script type="module" src="app.js"></script>
</body>
</html>